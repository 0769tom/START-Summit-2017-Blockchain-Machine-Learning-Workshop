![Intro](https://raw.githubusercontent.com/thoschm/START-Summit-2017-Blockchain-Machine-Learning-Workshop/master/img/page_0000.jpg)

# START-Summit-2017-Blockchain-Machine-Learning-Workshop
Presentation Material and Sample Code from the Blockchain and Machine Learning Workshop at START Summit 2017 in Switzerland

# Intro
The purpose of this code is to demonstrate in a simple example, how to bring Blockchain technology, smart contracts and Machine Learning together.
It implements a simple chat client that can transmit messages, images and tags to the Blockchain. Tags are automatically extracted via a simple Deep Neural Network using the Keras Python Package with Tensorflow backend.
In addition to just sending messages, the client also supports listening for new messages on the Blockchain from other participants.
For details, please view the workshop presentation.

# Files
```
- runTestnet.sh: launches a local development Blockchain for easy testing
- contract.sol: contains the smart contract code in solidity language
- installContract.py: Python script for sending our contract to the Blockchain
- user.py: Python script that contains the actual chat client
- classify.py: Python script to classifiy an image file
```
# Setup
I really recommend using Linux at this point. The installation guidelines will focus on Ubuntu Linux 16.04 LTS, but should be similar for other distributions.

## We need to install Python 2.7, pip, curl and git first:
```
open a Linux Terminal and enter the following command:
sudo apt-get install python2.7 python-pip curl git build-essential libssl-dev
```

## Install current nodejs version:
```
curl -sL https://deb.nodesource.com/setup_7.x | sudo -E bash -
sudo apt-get install -y nodejs
```

## Install the blockchain test environment:
```
sudo npm install -g ethereumjs-testrpc
```

## Install additional Python packages:
```
sudo pip install -U pip
sudo pip install -U numpy keras tensorflow ethjsonrpc
```

## Now let's clone the workshop code:
```
cd
git clone https://github.com/thoschm/START-Summit-2017-Blockchain-Machine-Learning-Workshop.git workshop_code
```

## Last step of preparation - cloning a ready deep-learning model:
```
cd
git clone https://github.com/fchollet/deep-learning-models.git
cp deep-learning-models/resnet50.py workshop_code/code/
cp deep-learning-models/imagenet_utils.py workshop_code/code/
```
# Simple Image Classification Example
```
cd
cd workshop_code/code
[get some image file in there]
python classify.py image.jpg
```

# Running the complete complete Blockchain + ML Demo

![Architecture](https://raw.githubusercontent.com/thoschm/START-Summit-2017-Blockchain-Machine-Learning-Workshop/master/img/page_0032.jpg)

## Starting the Blockchain testnet
```
cd 
cd workshop_code/code
./runTestNet.sh
```
![TestNet](https://raw.githubusercontent.com/thoschm/START-Summit-2017-Blockchain-Machine-Learning-Workshop/master/img/page_0033.jpg)

We have now created a local testnet that will look and feel the same way as a'normal' node (RPC communication is the same).
The addresses under 'Available Accounts' are the IDs that will identify our network users - like nicknames on a chat platform. Normally they would be sitting on difference computers distributed over the internet and the good news is, the workshop code will work in a 'real' Blockchain network without any modification. 

## Installing the smart contract on the chain
Now open a new terminal and let the testnet run, we need it.
In the new console, enter:
```
cd
cd workshop_code/code
python installContract.py
```
This will compile the smart contract from the file 'contract.sol' into byte-code and print it to the console. Also the code is sent to the Blockchain via transaction. To access it there, we need to remember the contract-address that is output as well.

```
--------------------------------------------------------------------------------
client software: EthereumJS TestRPC/v3.0.3/ethereum-js
block: 0
address: 0x0d56bafa9c8181199e99956a3f67eb937a47ce80
--------------------------------------------------------------------------------
compiling contract...
0x606060405234610000575b6107df806100186000396000f3606060405260e060020a600035046303c0bfb5811461003457806324af4cdb1461016d578063416ae7681461023c575b610000565b3461000057610041610378565b604051808060200180602001806020018481038452878181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156100a95780820380516001836020036101000a031916815260200191505b508481038352868181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156101025780820380516001836020036101000a031916815260200191505b508481038252858181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f16801561015b5780820380516001836020036101000a031916815260200191505b50965050505050505060405180910390f35b346100005761023a600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284375050604080516020601f89358b0180359182018390048302840183019094528083529799988101979196509182019450925082915084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979998810197919650918201945092508291508401838280828437509496506103b495505050505050565b005b34610000576100416004356105e5565b604051808060200180602001806020018481038452878181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156100a95780820380516001836020036101000a031916815260200191505b508481038352868181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156101025780820380516001836020036101000a031916815260200191505b508481038252858181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f16801561015b5780820380516001836020036101000a031916815260200191505b50965050505050505060405180910390f35b6040805160208181018352600080835283518083018552818152845192830190945281529091906103a8336105e5565b9250925092505b909192565b826000600033600160a060020a031681526020019081526020016000206000019080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061041d57805160ff191683800117855561044a565b8280016001018555821561044a579182015b8281111561044a57825182559160200191906001019061042f565b5b5061046b9291505b808211156104675760008155600101610453565b5090565b5050816000600033600160a060020a031681526020019081526020016000206001019080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106104d657805160ff1916838001178555610503565b82800160010185558215610503579182015b828111156105035782518255916020019190600101906104e8565b5b506105249291505b808211156104675760008155600101610453565b5090565b5050806000600033600160a060020a031681526020019081526020016000206002019080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061058f57805160ff19168380011785556105bc565b828001600101855582156105bc579182015b828111156105bc5782518255916020019190600101906105a1565b5b506105dd9291505b808211156104675760008155600101610453565b5090565b50505b505050565b604080516020808201835260008083528351808301855281815284518084018652828152600160a060020a0387168352828452918590208054865160026001808416156101000260001901909316819004601f810188900488028301880190995288825296979396949592949185019391850192909185918301828280156106ae5780601f10610683576101008083540402835291602001916106ae565b820191906000526020600020905b81548152906001019060200180831161069157829003601f168201915b5050855460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529598508794509250840190508282801561073c5780601f106107115761010080835404028352916020019161073c565b820191906000526020600020905b81548152906001019060200180831161071f57829003601f168201915b5050845460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152959750869450925084019050828280156107ca5780601f1061079f576101008083540402835291602001916107ca565b820191906000526020600020905b8154815290600101906020018083116107ad57829003601f168201915b505050505090509250925092505b919390925056
--------------------------------------------------------------------------------
contract sent, waiting for it to be mined...
contract mined (block: 1)
--------------------------------------------------------------------------------
contract_address:


--> 0x86817fbb2715c45d70163ba9de0b7af9c90f6282 <--


--------------------------------------------------------------------------------
```
